<p>Around the end of March 2013, BioJava will move from SVN to GIT for
version control. This page should be viewed as a proposal for how the
migration process will progress. It is a work in progress. Please share
your comments on the talk page or on the mailing list.</p>

<h2 id="benefits-of-the-move">Benefits of the move</h2>

<ul>
  <li>Use branches in your daily workflow without merge terror</li>
  <li>Track buggy/untested code without breaking the build for everyone
else</li>
  <li>Collaborate within a small team before sharing the finished feature</li>
  <li>Simple, well integrated bug tracking</li>
  <li>Accept contributions from the public via pull requests</li>
</ul>

<h2 id="current-situation">Current Situation</h2>

<p>The primary BioJava SVN repository requires an ssh account for each
developer. As described in <a href="http://biojava.org/w/index.php?title=Developer_Code_Access&amp;oldid=5082">Developer Code
Access</a>,
the repository url is</p>

<p><code class="highlighter-rouge"> svn co svn+ssh://dev.open-bio.org/home/svn-repositories/biojava/biojava-live/trunk/</code></p>

<p>There are also two read-only mirrors which permit anonymous access. The
recommended public access point for SVN is</p>

<p><code class="highlighter-rouge"> svn co </code><a href="http://code.open-bio.org/repos/biojava/biojava-live/trunk"><code class="highlighter-rouge">http://code.open-bio.org/repos/biojava/biojava-live/trunk</code></a></p>

<p>A commit hook is used to update a github mirror after each commit. This
repository is read-only (by policy). Although it is possible to develop
from a GIT clone &amp; submit push-requests with new code, none such
requests are accepted. Github repositories can be accessed using either
GIT (recommended) or SVN[1][2]</p>

<p><code class="highlighter-rouge"> git clone </code><a href="https://github.com/biojava/biojava.git"><code class="highlighter-rouge">https://github.com/biojava/biojava.git</code></a></p>

<p><code class="highlighter-rouge"> svn co --depth empty </code><a href="https://github.com/biojava/biojava"><code class="highlighter-rouge">https://github.com/biojava/biojava</code></a><br />
<code class="highlighter-rouge"> svn up biojava/trunk</code><br />
<code class="highlighter-rouge"> </code></p>

<p>Neither of these methods are recommended, although they have been
suggested to work around open-bio.org server problems.</p>

<h2 id="developers">Developers</h2>

<h3 id="linking-svn-to-git">Linking SVN to GIT</h3>

<p>As an open source project we want to make sure that contributors are
fairly acknowledged. Moving to github requires using github accounts to
identify developers. This means linking old SVN account names to a
github account so that past and future contributions are linked to the
same person.</p>

<ol>
  <li>Wherever possible, map SVN accounts to Github accounts. Most active
developers have already added themselves to the google spreadsheet
to enable this (see mailing list)</li>
  <li>If no Github account is known, associate SVN account with their
email address. Developers can link this email to a github account at
a future time, which will automatically tie them to past commits</li>
  <li>If no email address is known, or the email is no longer accessible,
commits will be credited to their SVN account name only.</li>
</ol>

<h3 id="user-permissions">User permissions</h3>

<p>We currently have two classes of SVN permissions:</p>

<ol>
  <li><em>Developers.</em> Full write access to any Biojava project through the
developer SVN.</li>
  <li><em>Users.</em> Read-only access to the anonymous mirrors.</li>
</ol>

<p>The decentralized nature of GIT will allow a third class of users:</p>

<ol>
  <li><em>Developers.</em> Members of the <a href="https://github.com/biojava?tab=members">Biojava Github
organization</a>. Can configure
push access on a project-specific level.</li>
  <li><em>Contributors.</em> Github users who are not part of the biojava
organization, but maintain a personal fork of the project &amp; submit
push requests</li>
  <li><em>Users.</em> General users who clone the code &amp; don’t submit push
requests.</li>
</ol>

<p>Current developers may find it easier to submit push requests rather
than join the Biojava organization. However, frequent contributors
should join so that the burden of accepting pull requests does not
become too high for the administrators.</p>

<h2 id="migration-plan">Migration Plan</h2>

<p>On Sat, April 29, 2013:</p>

<ol>
  <li>Generate authors file for svn2git based on known github accounts or
email addresses</li>
  <li>Set SVN to read-only</li>
  <li>Delete the existing git repository. All forks of the current repo
will become incompatible.</li>
  <li>Use svn2git tool to create a new git repository, converting author
information along the way</li>
  <li>All developers checkout git repositories &amp; begin pushing changes to
github</li>
</ol>

<p>It is unfortunate that the 12 existing forks (plus local clones) will be
incompatible, but none of the public forks have diverged significantly
from the trunk so this should be acceptable.</p>

<h2 id="projects">Projects</h2>

<p>Unlike SVN, each project will have a separate repository under the
BioJava organization. Only actively developed projects will be moved to
github, with inactive projects (eg DASRepository) remaining on the
read-only SVN server. Specifically, the following projects will be moved
to github:</p>

<ul>
  <li>biojava-live, renamed to biojava</li>
  <li>biojava-legacy</li>
  <li>RCSB_SequenceViewer, renamed to rcsb-sequenceviewer</li>
  <li>RCSB Viewers, renamed to rcsb-viewers</li>
</ul>

<h2 id="repository-layout">Repository Layout</h2>

<p>The github repository for each project will contain the following
branches, based on a variant of the <a href="http://nvie.com/posts/a-successful-git-branching-model/">git-flow
model</a>:</p>

<ol>
  <li><strong>master</strong> Current development branch, corresponding to SVN trunk.
All active developers are free to make commits directly to this
branch, as well as merging feature branches and pull requests</li>
  <li><strong>release</strong> By definition, any commit to this branch counts as a
release. Each commit should be tagged with a new version number, eg
‘v3.1.0’, and should result in a new set of jar files getting
uploaded to the wiki. Only project leads should commit to this
branch.</li>
</ol>

<p>Additionally, any number of feature branches may be present should
developers wish to collaborate on specific features. The <strong>master</strong>
branch will be marked as the default branch. This is analogous to
checking out trunk from svn to get the most recent code:</p>

<p><code class="highlighter-rouge"> git clone </code><a href="https://github.com/biojava/biojava.git"><code class="highlighter-rouge">https://github.com/biojava/biojava.git</code></a></p>

<p>Specific branches for each release (eg a release-3.1.0 branch containing
only bugfixes) could also be used. However, past releases have mostly
not had significant bug fixes during testing, so this may be unnecessary
complexity.</p>

<h2 id="missing-history">Missing History</h2>

<p>The SVN repository used SVN 1.4, which does not store information about
merges. This made it extremely difficult to deal with the major
refactoring that occurred as part of the <a href="BioJava:MavenMigration" title="wikilink">Maven
Migration</a>. Another problem was that
a number of branches don’t contain the full trunk (only a single
project), and git lacks a mechanism to deal with partial checkouts. As a
result, no history prior to September 2009 (r7227) was migrated to Git.
This is unfortunate, but it would have been extremely difficult and
time-consuming to document all the large moves and refactors from
BioJava’s history in a way consistent with git.</p>

<p>The anonymous SVN will continue to be accessible as documentation of the
full history in SVN.</p>

<h2 id="references">References</h2>

<references />

<p>[1] Github blog. <a href="https://github.com/blog/626-announcing-svn-support">Announcing SVN
support</a>. Accessed
2013-03-18</p>

<p>[2] Github blog. <a href="https://github.com/blog/1178-collaborating-on-github-with-subversion">Collaborating on Github with
Subversion</a>.
Accessed 2013-03-18</p>
