<h2 id="notes">Notes</h2>

<ul>
  <li><code class="highlighter-rouge">         Bond records are ignored in the loaders.  Bonds are determined either through</code><br />
<code class="highlighter-rouge">         a dictionary lookup, or via calculation if the lookup fails.</code><br />
<code class="highlighter-rouge">       </code></li>
  <li><code class="highlighter-rouge">         Currently the lookup files described here are generated by an external process and are incorporated</code><br />
<code class="highlighter-rouge">         directly within the 'Structure Models' jar as a resource.  This means that they can only be updated</code><br />
<code class="highlighter-rouge">         if the 'Structure Models' jar is updated.</code><br />
<code class="highlighter-rouge">       </code></li>
  <li><code class="highlighter-rouge">         A preferable approach would be to put them in their own jar, that can be updated independently</code><br />
<code class="highlighter-rouge">         of the model jar (or any functional jars.)</code><br />
<code class="highlighter-rouge">       </code></li>
  <li><code class="highlighter-rouge">         See the </code><em><code class="highlighter-rouge">RCSB Excluded</code></em><code class="highlighter-rouge"> project, </code><em><code class="highlighter-rouge">CL Tools</code></em><code class="highlighter-rouge"> directory for more information.</code></li>
</ul>

<h2 id="relevent-classes">Relevent Classes</h2>

<ul>
  <li>Bond - definition class</li>
  <li>BondFactory - Creates the bonds (static)</li>
  <li>ChemicalComponentBonds - does lookup for bonds</li>
  <li>NucleicAcidInfo - does lookup for nucleic acids</li>
  <li>Octree - for calculating bonds</li>
  <li>OctreeAtomItem - for Octree</li>
  <li>OctreeDataItem - for Octree</li>
</ul>

<h2 id="explanation">Explanation</h2>

<p><code class="highlighter-rouge">     MBT maintains a dictionary of known structures. This comes from a combined .cif file that is found at this ftp</code><br />
<code class="highlighter-rouge">     site:</code><br />
<code class="highlighter-rouge">   </code></p>

<p><code class="highlighter-rouge">       </code><a href="ftp://ftp.wwpdb.org/pub/pdb/data/monomers/components.cif.gz"><code class="highlighter-rouge">ftp://ftp.wwpdb.org/pub/pdb/data/monomers/components.cif.gz</code></a></p>

<p><code class="highlighter-rouge">   </code></p>

<p><code class="highlighter-rouge">     This file is loaded and broken apart by an external process - see the </code><span class="projectname"><code class="highlighter-rouge">RCSB Excluded</code></span><code class="highlighter-rouge"> </code><br />
<code class="highlighter-rouge">     project, package</code><br />
<code class="highlighter-rouge">     </code><span class="packagename"><code class="highlighter-rouge">tools</code></span><code class="highlighter-rouge"> package.</code><br />
<code class="highlighter-rouge">   </code></p>

<p><code class="highlighter-rouge">     </code><span class="classname"><code class="highlighter-rouge">ChemicalComponentBondsCreator</code></span><code class="highlighter-rouge"> is run from the commandline against the file. It's not a full parser - it just</code><br />
<code class="highlighter-rouge">     extracts bond information. The output of that (ChemicalComponentBonds.dat') is copied into the</code><br />
<code class="highlighter-rouge">     </code><span class="projectname"><code class="highlighter-rouge">RCSB MBT Libs</code></span><br />
<code class="highlighter-rouge">     project, source directory </code><span class="foldername"><code class="highlighter-rouge">Structure Model</code></span><code class="highlighter-rouge">, in the package</code><br />
<code class="highlighter-rouge">     </code><span class="packagename"><code class="highlighter-rouge">util</code></span><code class="highlighter-rouge"> as a resource.</code><br />
<code class="highlighter-rouge">   </code></p>

<p><code class="highlighter-rouge">     At runtime, this abbreviated file is picked up and put into a hash-table. Atoms are checked against this for bond</code><br />
<code class="highlighter-rouge">     information.</code><br />
<code class="highlighter-rouge">   </code></p>

<p><code class="highlighter-rouge">     If bonds are not found for a given residue, the atoms are run through a bond-generation algorithm that determines</code><br />
<code class="highlighter-rouge">     bonds by distance. Atoms are arranged in an octree, first, for quick spatial checks.</code><br />
<code class="highlighter-rouge">   </code></p>

<p><code class="highlighter-rouge">     Look in the 'RCSB MBT Libs' project, source directory 'Structure Model', in the package</code><br />
<code class="highlighter-rouge">     </code><span class="packagename"><code class="highlighter-rouge">model</code></span><code class="highlighter-rouge"> for</code><br />
<code class="highlighter-rouge">     the </code><span class="classname"><code class="highlighter-rouge">StructureMap</code></span><code class="highlighter-rouge"> class, again. In there, find </code><span class="method"><code class="highlighter-rouge">generateBonds()</code></span><code class="highlighter-rouge">.</code><br />
<code class="highlighter-rouge">     Note it checks a flag to ignore the dictionary</code><br />
<code class="highlighter-rouge">     lookup and strictly use the distance algorithm (suspect this is for debugging, mainly). The</code><br />
<code class="highlighter-rouge">     </code><span class="classname"><code class="highlighter-rouge">BondFactory</code></span><code class="highlighter-rouge"> class is what does the dictionary lookup or bond calculations, depending on</code><br />
<code class="highlighter-rouge">     what's required.</code><br />
<code class="highlighter-rouge">   </code></p>

<p><code class="highlighter-rouge">     Incidentally, the same kind of mechanism is used to determined nucleic acid classification. In the </code><br />
<code class="highlighter-rouge">     </code><span classname="projectname"><code class="highlighter-rouge">RCSB Excluded</code></span><code class="highlighter-rouge"> project, source directory </code><span class="foldername"><code class="highlighter-rouge">CL Tools'</code></span><code class="highlighter-rouge">,</code><br />
<code class="highlighter-rouge">     the </code><span class="classname"><code class="highlighter-rouge">FindAllNucleicAcidCompoundNames</code></span><code class="highlighter-rouge"> is also</code><br />
<code class="highlighter-rouge">     run from the commandline and generates an output file ('NucleicAcidCompoundNames.dat').</code><br />
<code class="highlighter-rouge">   </code></p>
