<h2 id="comment-crer-un-alphabet-sur-mesure-pour-ensuite-lutiliser-dans-une-orderndistribution">Comment créer un Alphabet sur mesure pour ensuite l’utiliser dans une OrderNDistribution?</h2>

<p>Cet exemple illustre la création d’un <em>Alphabet</em> sur mesure de sept
<em>Symbols</em>. Ces <em>Symbols</em> et <em>Alphabet</em> peuvent ensuite servir à créer
des <em>SymbolLists</em>, des <em>Sequences</em>, des <em>Distributions</em>, etc. Lorsque le
<em>AlphabetManager</em> crée le <em>CrossProductAlphabet</em>, il inferrera que
l’alphabet conditionnant est d’ordre (ordre -1) et que celui de
l’alphabet conditionné est de 1.</p>

<p>Contribution de Russel Smithies.</p>

<java> import java.io.\*; import java.util.\*;

import org.biojava.bio.\*; import org.biojava.bio.dist.\*; import
org.biojava.bio.symbol.\*; import org.biojava.utils.\*;

public class DistTest {

` public static void main(String[] args) throws Exception {`

`   //créer un Alphabet sur mesure pour les sept nains`  
`   String[] dNames = {`  
`       "Grumpy", "Sleepy", "Dopey", "Doc", "Happy", "Sneezy", "Bashful"`  
`   };`  
`   Symbol[] dwarfs = new Symbol[7];`  
`   SimpleAlphabet dwarfAlphabet = new SimpleAlphabet();`

`   //donner un nom à ce nouvel Alphabet`  
`   dwarfAlphabet.setName("Dwarf");`

`   for (int i = 1; i &lt;= 7; i++) {`  
`    try {`  
`      dwarfs[i - 1] = `  
`       AlphabetManager.createSymbol((char) ("0" + i), "" + dNames[i - 1],Annotation.EMPTY_ANNOTATION);`  
`          //ajouter vos nouveaux Symbols à cet Alphabet`  
`           dwarfAlphabet.addSymbol(dwarfs[i - 1]);`  
`     }`  
`    catch (Exception e) {`  
`       throw new NestedError(e, "Can"t create symbols to represent dwarf");`  
`     }`

`   // il est usuel (mais pas essentiel) d'enregistrer les `  
`   // Alphabets nouvellement crées avec l'AlphabetManager`  
`   AlphabetManager.registerAlphabet(dwarfAlphabet.getName(), dwarfAlphabet);`

`   }`

</java>

<p>Créer une <em>OrderNDstribution</em> qui utilise l<em>‘Alphabet</em> Dwarf fraichement
crée.</p>

<java>

`   // ordre de la distribution`  
`   int order = 3;`

`   // créer l'Alphabet des produits croisés`  
`   Alphabet a = `  
`     AlphabetManager.getCrossProductAlphabet(Collections.nCopies(order, dwarfAlphabet));`

`   // utiliser OrderNDistributionFactory pour créer la Distribution`  
`   OrderNDistribution ond = `  
`     (OrderNDistribution)OrderNDistributionFactory.DEFAULT.createDistribution(a);`

`   // créer le DistributionTrainer`  
`   DistributionTrainerContext dtc = new SimpleDistributionTrainerContext();`

`   // enregistrer la Distribution avec l'entraineur`  
`   dtc.registerDistribution(ond);`

</java>

<p>Voici comment créer une <em>SymbolList</em> à partir de l’alphabet Dwarf pour
pouvoir tester notre nouvelle <em>OrderNDistribution</em>. Ceci se fait en
fabriquant une <em>UniformDistribution</em> échantillonnée de manière aléatoire
et en ajoutant les <em>Symbols</em> dans une <em>ArrayList</em>. L<em>‘ArrayList</em> est
ensuite utilisée pour construire la <em>SymbolList</em>.</p>

<java>

`   // créer une SymbolList aléatoire de nains`  
`   UniformDistribution udist = `  
`      new UniformDistribution((FiniteAlphabet)dwarfAlphabet);`

`   int size = 100;`  
`   List list = new ArrayList();`

`   for (int i = 0; i &lt;  size; i++) {`  
`     list.add(udist.sampleSymbol());`  
`   }`

`   // créer une SymbolList pour tester la Distribution`  
`   SymbolList symbl = new SimpleSymbolList(dwarfAlphabet, list);`

</java>

<p>La <em>SymbolList</em> est ensuite convertie en <em>OrderNSymbolList</em> pour
permettre à une <em>OrderNDistribution</em> d’être creer avec elle.</p>

<java>

`   // convertir en OrderNSymbolList`  
`   symbl = SymbolListViews.orderNSymbolList(symbl, order);`

`   // ou vous pourriez faire une SymbolList avec fenètre`  
`   // symbl = SymbolListViews.windowedSymbolList(symbl, order);`

`   // ajouter les comptes à la Distribution`  
`   for (Iterator i = symbl.iterator(); i.hasNext(); ) {`  
`     try {`  
`       dtc.addCount(ond, (Symbol) i.next(), 1.0);`  
`     }`  
`     catch (IllegalSymbolException ex) {`  
`      // vous avez essayer d'ajouter un Symbol qui n'est pas dans votre Alphabet`  
`       ex.printstacktrace()}`  
`   }`

`   // n'oubliez pas votre entrainement ou aucune de vos valeurs ne sera ajouter`  
`   dtc.train();`

`   //écrire la Distribution en XML`  
`   XMLDistributionWriter writer = new XMLDistributionWriter();`

`   writer.writeDistribution(ond, new FileOutputStream("dwarf.xml"));`  
` }`

} </java>
